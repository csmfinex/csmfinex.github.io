# 									信息收集篇

##### 被动信息收集







##### 主动信息收集

```
PING 命令是我们常用的判断主机之间网络是否畅通，同样也是能判断我们的目标主机是否存活。
	Traceroute 命令也可以对路由进行跟踪
```

```
ARP 概述：ARP 协议是“Address Resolution Protocol”（地址解析协议）的缩写。计算机通过 ARP 协议将 IP 地址转换成 MAC地址。
	在以太网中，数据传输的目标地址是 MAC 地址，一个主机要和另一个主机进行直接通信，必须要知道目标主机的 MAC 地址。
	计算机使用者通常只知道目标机器的 IP 信息，“地址解析”就是主机在发送帧前将目标 IP 地址转换成目标 MAC 地址的过程。
	简单地说，ARP 协议主要负责将局域网中的 32 位 IP 地址转换为对应的 48 位物理地址，即网卡的MAC 地址，保障通信顺利进行。
	使用 arping 命令查看局域网中的 IP 是否有冲突
```

	eg1:对 arping 命令的结果进行筛选，只取 ip 地址	

```
arping -c 1 192.168.1.1 | grep "bytes from" | cut -d" " -f 5 | cut -d "(" -f 2 | cut -d")" -f 1
	(我们发现 arping 只能对一个 ip 地址进行判断，这个时候我们就需要通过脚本来实现对网络的自动扫描。)
	(上传 arping1.sh 脚本，给我们写好的脚本加上执行权限，我们 linux 中可执行程序需要拥有执行权限才可以直接执行。)
```

```
eg2: ifconfig ens33 192.168.1.1		#模拟 IP 地址冲突再开一台 centos 虚拟机 xuegod63，把 IP 地址改成192.168.1.1 
	./arping1.sh eth0 #查看局域网中是否存在 arp 攻击     #注如果出现两个一样的 IP 地址，就是有 ARP 攻击了
```

###### netdiscover 

> 进行被动方式探测局域中存活的机器

```
netdiscover 是一个主动/被动的 ARP 侦查工具。使用 netdiscover 工具可以在网络上扫描 IP 地址，检查在线主机或搜索为它们发送的 ARP 请求。
```

```
主动模式：主动模式顾名思义就是主动的探测发现网络内主机，但是这种方式往往会引起网络管理员的注意
		netdiscover -i eth0 -r 192.168.1.0/24
			参数：	  -i device: your network device
					-r range: scan a given range instead of auto scan. 192.168.6.0/24,/16,/8
```

```
被动模式：被动模式的方法更加隐蔽，但是速度会比较慢，网卡被设置为混杂模式来侦听网络内的 arp 数据包进行被动式探测，这种方式就需要网			络内设备发送 arp 包才能被探测到。
		netdiscover -p
			参数：	  -p passive mode: do not send anything, only sniff
```

###### FPING     	

> 查看局域中运行了哪些机器 
>
> Fping 就是 ping 命令的加强版他可以对一个 IP 段进行 ping 扫描，而 ping 命令本身是不可以对网段进行扫描的。

```
fping -ag 192.168.1.0/24 > fping.txt    或     fping -ag 192.168.1.1 192.168.1.254 > fping.txt
			-a 表示只显示存活主机
			-g 表示对地址段进行扫描如果不加可以对某个 IP 进行扫描
			fping.txt 表示将扫描的结果重定向到 fping.txt ，原因是如果扫描一个网段的话输出结果是非常多的，我们输出重定向到文						件中只会获得存活的主机信息。
```

###### Nmap 

```
Nmap，也就是 Network Mapper，最早是 Linux 下的网络扫描和嗅探工具包。
			-sn 参数说明：表示只 ping 扫描，不进行端口扫描
		nmap 扫描类型主要有 TCP 的全连接扫描（会在被扫描机器留下记录），半连接扫描（不会留下记录）
			-sS 表示使用 SYN 进行半连接扫描
```

###### nc 

> ​	nc 是 netcat 的简写，有着网络界的瑞士军刀美誉。因为它短小精悍、功能实用，被设计为一个简单、可靠的网络工具

```
nc 的作用:

  1. 实现任意 TCP/UDP 端口的侦听，nc 可以作为 server 以 TCP 或 UDP 方式侦听指定端口
  2. 端口的扫描，nc 可以作为 client 发起 TCP 或 UDP 连接
  3. 机器之间传输文件
  4. 机器之间网络测速 
      nc 参数：
        -nv 表示我们扫描的目标是个 IP 地址不做域名解析
        -w 表示超时时间
        -z 表示进行端口扫
```












